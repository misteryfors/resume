(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{8394:(e,a,t)=>{Promise.resolve().then(t.bind(t,5458))},9600:(e,a,t)=>{"use strict";t.d(a,{CryptoDataProvider:()=>n,x:()=>c});var i=t(5155),r=t(2115);let l=(0,r.createContext)(void 0),s=[{id:"BTC",count:1.1},{id:"ETH",count:.2},{id:"TON",count:.3},{id:"NOT",count:.4},{id:"SOL",count:.5}],n=e=>{let{children:a}=e,[t,n]=(0,r.useState)([]);return(0,r.useEffect)(()=>{let e=localStorage.getItem("CryptoData");n(e?JSON.parse(e):s)},[]),(0,r.useEffect)(()=>{console.log("storage обновлён"),console.log(t)},[t]),(0,i.jsx)(l.Provider,{value:{storage:t,updateStorage:e=>{if(e)localStorage.setItem("CryptoData",JSON.stringify(e)),n(e);else{let e=localStorage.getItem("CryptoData");n(e?JSON.parse(e):[])}}},children:a})},c=()=>{let e=(0,r.useContext)(l);if(!e)throw Error("useCryptoData must be used within a CryptoDataProvider");return e}},5893:(e,a,t)=>{"use strict";async function i(){try{let e=await fetch("https://min-api.cryptocompare.com/data/all/coinlist"),a=await e.json(),t=Object.values(a.Data).map(e=>({id:e.Symbol,name:e.CoinName,image:"https://www.cryptocompare.com".concat(e.ImageUrl)}));return console.log(t),t}catch(e){return console.error("Ошибка запроса:",e),[]}}t.d(a,{a:()=>i})},5458:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>u});var i=t(5155),r=t(2115);t(7418),t(8618);var l=t(5781);l.t1.register(l.PP,l.kc,l.No,l.hE,l.m_,l.s$,l.ZT,l.dN,l.FN);let s=e=>{let{data:a=[,,,,,].fill({})}=e,[t,s]=(0,r.useState)(!0),[n,c]=(0,r.useState)(a),[o,d]=(0,r.useState)(0),[m,u]=(0,r.useState)(0),h=(0,r.useRef)(null);(0,r.useEffect)(()=>{let e=()=>{let e=h.current;if(e){var a;let t=Math.floor(e.clientWidth/((null===(a=e.firstElementChild)||void 0===a?void 0:a.getBoundingClientRect().width)||0));u(Math.max(0,n.length-t))}};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[n]);let p=e=>{let a=h.current;if(a){var t;let i=(null===(t=a.firstElementChild)||void 0===t?void 0:t.getBoundingClientRect().width)||0;a.scrollTo({left:e*i,behavior:"smooth"})}};return(0,r.useEffect)(()=>{async function e(e){try{let a=await fetch("https://data-api.cryptocompare.com/index/cc/v1/historical/hours?market=cadli&instrument=".concat(e,"-USD&limit=12&aggregate=1&fill=true&apply_mapping=true&response_format=JSON&api_key=05d2a4b81b64c727e7cdd2efd17cf59fa181c65fca458ee56edb6271020a4ee1"));return await a.json()}catch(a){return console.error("Ошибка при получении данных для ".concat(e,":"),a),null}}(async function(){s(!0),c(await Promise.all(a.map(async a=>{if(!a.id)return a;let t=await e(a.id);return{...a,data:t||null}}))),s(!1)})()},[a]),(0,r.useEffect)(()=>{!t&&Array.isArray(n)&&n.forEach(e=>{if(e.id&&e.data){let a=document.getElementById("".concat(e.id,"-graph"));a&&function(e,a){let t=e.Data.map(e=>new Date(1e3*e.TIMESTAMP).toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric"})),i=e.Data.map(e=>e.CLOSE);l.t1.getChart(a)&&l.t1.getChart(a).destroy(),new l.t1(a,{type:"line",data:{labels:t,datasets:[{label:"Цена закрытия (BTC-USD)",data:i,borderColor:"#2979ff",backgroundColor:"rgba(41, 121, 255, 0.0)",borderWidth:2,tension:0,fill:!0,pointRadius:i.map((e,a)=>a===i.length-1?5:0),pointBackgroundColor:i.map((e,a)=>a===i.length-1?"#2979ff":"rgba(0,0,0,0)")}]},options:{responsive:!0,plugins:{legend:{display:!1,labels:{color:"#ffffff"}}},scales:{x:{type:"category",display:!1,ticks:{color:"#ffffff"},grid:{color:"rgba(255, 255, 255, 0.1)"}},y:{type:"linear",display:!1,ticks:{color:"#ffffff"},grid:{color:"rgba(255, 255, 255, 0.1)"}}}}})}(e.data,a)}})},[n,t]),(0,i.jsxs)("div",{className:"main__slider slider",children:[(0,i.jsx)("button",{className:"slider__left-button",onClick:()=>{if(o>0){let e=o-1;d(e),p(e)}},disabled:0===o}),(0,i.jsx)("div",{className:"slider__mask-gradient",children:(0,i.jsx)("div",{className:"slider__mask-gradient-overlay",children:(0,i.jsx)("div",{className:"slider__list",ref:h,children:n.map((e,a)=>{var r,l,s,n,c,o,d,m,u,h,p;return(0,i.jsx)("div",{className:"slider__list-item",children:e.image?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("img",{className:"slider__item-icon",src:e.image,alt:e.name||"coin"}),(0,i.jsxs)("p",{className:"slider__item-name",children:[(0,i.jsx)("span",{className:"slider__item-name--full",children:e.name}),(0,i.jsx)("span",{className:"slider__item-name--short",children:e.id})]}),(0,i.jsx)("div",{className:"slider__item-arrow-block",children:(null===(r=e.data)||void 0===r?void 0:r.Data)&&((null===(l=e.data.Data[e.data.Data.length-1])||void 0===l?void 0:l.CLOSE)-(null===(s=e.data.Data[e.data.Data.length-3])||void 0===s?void 0:s.CLOSE))/100>0?(0,i.jsx)("img",{className:"slider__item-arrow",id:"".concat(e.id,"-arrow"),src:"./price-arrow-up.svg",alt:"arrow"}):(0,i.jsx)("img",{className:"slider__item-arrow",id:"".concat(e.id,"-arrow"),src:"./price-arrow-down.svg",alt:"arrow"})}),(0,i.jsx)("p",{className:"slider__item-price",children:t?"Загрузка...":(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("span",{className:"slider__item-price--current",id:"".concat(e.id,"-price"),children:[(null===(o=e.data)||void 0===o?void 0:null===(c=o.Data)||void 0===c?void 0:null===(n=c[e.data.Data.length-1])||void 0===n?void 0:n.CLOSE.toFixed(2))||"N/A","$"]}),(null===(d=e.data)||void 0===d?void 0:d.Data)&&((null===(m=e.data.Data[e.data.Data.length-1])||void 0===m?void 0:m.CLOSE)-(null===(u=e.data.Data[e.data.Data.length-3])||void 0===u?void 0:u.CLOSE))/100>0?(0,i.jsx)("span",{className:"slider__item-price--different-up",id:"".concat(e.id,"-change"),children:(null===(h=e.data)||void 0===h?void 0:h.Data)?((e.data.Data[e.data.Data.length-1].CLOSE-e.data.Data[e.data.Data.length-3].CLOSE)/100).toFixed(3)+"%":"N/A"}):(0,i.jsx)("span",{className:"slider__item-price--different-down",id:"".concat(e.id,"-change"),children:(null===(p=e.data)||void 0===p?void 0:p.Data)?((e.data.Data[e.data.Data.length-1].CLOSE-e.data.Data[e.data.Data.length-3].CLOSE)/100).toFixed(3)+"%":"N/A"})]})}),(0,i.jsx)("div",{className:"slider__item-graph",children:(0,i.jsx)("canvas",{id:"".concat(e.id,"-graph")})})]}):(0,i.jsx)("div",{className:"slider__item-placeholder",children:"Loading..."})},e.id||a)})})})}),(0,i.jsx)("button",{className:"slider__right-button",onClick:()=>{if(o<m){let e=o+1;d(e),p(e)}},disabled:o===m})]})};var n=t(5893);t(5086);var c=t(9600);let o=e=>{let{data:a}=e,{storage:t,updateStorage:l}=(0,c.x)(),[s,n]=(0,r.useState)(null),o=e=>{l(t.filter(a=>a.id!==e))};(0,r.useEffect)(()=>{!async function(){if(!t.length)return;let e=t.map(e=>"".concat(e.id,"-USD")).join(",");try{let a=await fetch("https://data-api.cryptocompare.com/index/cc/v1/latest/tick?market=cadli&instruments=".concat(e,"&apply_mapping=true&api_key=YOUR_API_KEY")),t=await a.json();(null==t?void 0:t.Data)&&n(t)}catch(e){console.error("Error fetching price data:",e)}}()},[t]);let d=a.reduce((e,a)=>(e[a.id]=a,e),{});return(0,i.jsxs)("div",{className:"main__portfolio portfolio",children:[(0,i.jsx)("p",{className:"main__name",children:"My Portfolio"}),s&&Object.keys(s.Data).length>0?t.map(e=>{var a,t,r;let l=s.Data["".concat(e.id,"-USD")];return l?(0,i.jsxs)("div",{className:"portfolio__item","data-coin-id":e.id,children:[(0,i.jsx)("button",{className:"portfolio__item-button",onClick:()=>o(e.id),children:(0,i.jsx)("img",{className:"portfolio__item-icon",src:(null===(a=d[e.id])||void 0===a?void 0:a.image)||void 0,alt:(null===(t=d[e.id])||void 0===t?void 0:t.name)||"Unknown"})}),(0,i.jsxs)("div",{className:"portfolio__item-text",children:[(0,i.jsxs)("p",{className:"portfolio__item-main",children:[(0,i.jsx)("span",{className:"portfolio__item-main--name",children:(null===(r=d[e.id])||void 0===r?void 0:r.name)||"Unknown"}),(0,i.jsx)("span",{className:"portfolio__item-main--price",children:(l.VALUE*e.count).toFixed(2)+"$"})]}),(0,i.jsxs)("p",{className:"portfolio__item-support",children:[(0,i.jsxs)("span",{className:"portfolio__item-support--different-down",children:[l.CURRENT_DAY_CHANGE_PERCENTAGE.toFixed(2),"%"]}),(0,i.jsx)("span",{className:"portfolio__item-support--price",children:Number(e.count).toFixed(7)+e.id})]})]})]},e.id):null}):(0,i.jsx)("p",{children:"No data available"})]})};t(5526),l.t1.register(l.PP,l.kc,l.No,l.hE,l.m_,l.s$);let d=e=>{var a;let{data:t=[]}=e,{storage:s}=(0,c.x)(),[n,o]=(0,r.useState)({}),[d,m]=(0,r.useState)("BTC"),[u,h]=(0,r.useState)(null),p=(0,r.useRef)(null),_=(0,r.useRef)(null);(0,r.useEffect)(()=>{o(t.reduce((e,a)=>(e[a.id]=a,e),{}))},[t]),(0,r.useEffect)(()=>{s.length>0&&s[0].id&&m(s[0].id),console.log(s)},[s]);let f=async(e,a,t)=>{try{let i="https://data-api.cryptocompare.com/index/cc/v1/historical/".concat(a,"?market=cadli&instrument=").concat(e,"-USD&limit=").concat(t,"&aggregate=1&fill=true&apply_mapping=true&response_format=JSON&api_key=").concat("ВАШ_API_КЛЮЧ"),r=await fetch(i),l=await r.json();console.log(l),l&&l.Data?h(l.Data):console.error("Invalid response structure",l)}catch(e){console.error("Failed to fetch data:",e)}};(0,r.useEffect)(()=>{d&&f(d,"minutes",60)},[d]),(0,r.useEffect)(()=>{if(u&&p.current){let e=p.current.getContext("2d");e&&(_.current&&_.current.destroy(),_.current=function(e,a){let t;if(!Array.isArray(e)||0===e.length)return console.error("Invalid or empty data provided to graphRender"),null;let i=e.map(e=>1e3*e.TIMESTAMP),r=Math.min(...i),s=Math.max(...i)-r,n=(t=s<=108e5?e.filter(e=>new Date(1e3*e.TIMESTAMP).getMinutes()%10==0):e).map(e=>{let a=new Date(1e3*e.TIMESTAMP);return s<=108e5?a.toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"}):s<=864e5?a.toLocaleTimeString("ru-RU",{hour:"2-digit"}):s<=6048e5?a.toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit"}):a.toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric"})}),c=t.map(e=>e.CLOSE);return new l.t1(a,{type:"line",data:{labels:n,datasets:[{label:"Цена закрытия",data:c,borderColor:"#2979ff",backgroundColor:"rgba(41, 121, 255, 0.1)",borderWidth:2,tension:0,fill:!1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1,labels:{color:"#ffffff"}}},scales:{x:{ticks:{color:"#ffffff"},grid:{color:"rgba(255, 255, 255, 0.1)"}},y:{ticks:{color:"#ffffff"},grid:{color:"rgba(255, 255, 255, 0.1)"}}}}})}(u,e))}console.log(null!=u?u[u.length-1]:"")},[u]);let g=(e,a)=>{f(d,e,a)};return(0,i.jsxs)("div",{className:"main__chart chart",children:[(0,i.jsx)("p",{className:"main__name",children:"Chart"}),(0,i.jsxs)("div",{className:"chart__menu",children:[(0,i.jsxs)("p",{className:"chart__menu--left",children:[(0,i.jsx)("select",{className:"chart__coin-select",value:d,onChange:e=>m(e.target.value),children:s.map(e=>{var a;return(0,i.jsxs)("option",{value:e.id,children:[null===(a=n[e.id])||void 0===a?void 0:a.name,"/",e.id]},e.id)})}),(0,i.jsx)("span",{className:"chart__coin-price",children:null!=u?(null===(a=u[u.length-1])||void 0===a?void 0:a.CLOSE)+"$":"Loading..."})]}),(0,i.jsxs)("div",{className:"chart__menu--right",children:[(0,i.jsx)("button",{className:"chart__button",onClick:()=>g("minutes",60),children:"1h"}),(0,i.jsx)("button",{className:"chart__button",onClick:()=>g("minutes",180),children:"3h"}),(0,i.jsx)("button",{className:"chart__button",onClick:()=>g("hours",24),children:"1d"}),(0,i.jsx)("button",{className:"chart__button",onClick:()=>g("days",7),children:"1w"}),(0,i.jsx)("button",{className:"chart__button",onClick:()=>g("days",30),children:"1m"})]})]}),(0,i.jsx)("div",{className:"chart__graph",children:(0,i.jsx)("canvas",{id:"priceChart",ref:p})})]})};t(6702);let m=()=>(0,i.jsxs)("div",{className:"main__live-market live-market",children:[(0,i.jsx)("p",{className:"main__name",children:"Live Market"}),(0,i.jsxs)("div",{className:"live-market__grid",children:[(0,i.jsx)("p",{className:"live-market__grid-item--atribute-name",children:"Coin"}),(0,i.jsx)("p",{className:"live-market__grid-item--atribute-name",children:"Change"}),(0,i.jsx)("p",{className:"live-market__grid-item--atribute-name",children:"Martket Cap"}),(0,i.jsx)("p",{className:"live-market__grid-item--atribute-name",children:"24h Volume"}),(0,i.jsx)("p",{className:"live-market__grid-item--atribute-name",children:"Price"}),(0,i.jsxs)("p",{className:"live-market__grid-item--coin-value",children:[(0,i.jsx)("img",{className:"live-market__grid-item--coin-icon",src:"./bitcoin-(btc).svg"}),(0,i.jsx)("span",{className:"live-market__grid-item--coin-name",children:"Bitcoin"})]}),(0,i.jsx)("p",{className:"live-market__grid-item--change-value",children:"+12.00%"}),(0,i.jsx)("p",{className:"live-market__grid-item--standard-value",children:"$3.560M"}),(0,i.jsx)("p",{className:"live-market__grid-item--standard-value",children:"$65.20M"}),(0,i.jsx)("p",{className:"live-market__grid-item--standard-value",children:"$48.032,32"})]})]});function u(){let{storage:e}=(0,c.x)(),[a,t]=(0,r.useState)([]);return(0,r.useEffect)(()=>{(async function(){t(await (0,n.a)()||[])})()},[]),(0,r.useEffect)(()=>{console.log("Storage updated:",e)},[e]),(0,i.jsx)("main",{className:"main",children:(0,i.jsxs)("div",{className:"main__grid",children:[(0,i.jsx)(s,{data:a.filter(a=>e.some(e=>e.id===a.id))}),(0,i.jsx)(o,{data:a.filter(a=>e.some(e=>e.id===a.id))}),(0,i.jsx)(d,{data:a.filter(a=>e.some(e=>e.id===a.id))}),(0,i.jsx)(m,{})]})})}},5526:()=>{},6702:()=>{},7418:()=>{},5086:()=>{},8618:()=>{}},e=>{var a=a=>e(e.s=a);e.O(0,[471,647,56,441,517,358],()=>a(8394)),_N_E=e.O()}]);